Aktiviti memindahkan folder dan fail antara peranti selalunya memenatkan. Cara biasa yang ramai guna ialah salin dulu ke cakera keras luaran, kemudian pindahkan semula ke peranti baru. Ada juga yang memilih untuk kongsikan folder melalui rangkaian dan buat salin-tampal.

Saya pula lebih suka menggunakan Windows Subsystem for Linux (WSL) kerana ia membolehkan saya memanfaatkan rsync, iaitu utiliti Linux yang sangat cekap untuk penyelarasan fail.

## Persediaan WSL
Pastikan peranti sudah mempunyai WSL bersama mana-mana distro Linux. Saya biasanya guna Ubuntu.

Membolehkan Peranti Baru Akses WSL Peranti Lama Melalui SSH

1. Pasang SSH Server pada WSL (peranti asal):

`sudo apt-get update -y`
`sudo apt-get install openssh-server -y`

2. Forward port dari Windows ke WSL:

Jalankan perintah berikut di PowerShell pada peranti asal:

`netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=2222 connectaddress=<alamat-IP-WSL> connectport=22`

3. Buka firewall port 2222:

`netsh advfirewall firewall add rule name='Buka port 2222 untuk WSL' dir=in action=allow protocol=TCP localport=2222`

4. Uji sambungan SSH:

Dari peranti baru, cuba sambung:

`ssh nama-pengguna@alamat-IP-peranti-asal -p 2222`

## SSH Tanpa Kata Laluan
Supaya tidak perlu masukkan kata laluan setiap kali, gunakan SSH key:

1. Cipta SSH key pada peranti baru:

`ssh-keygen -t rsa`

2. Salin public key ke peranti asal:

`ssh-copy-id -i ~/.ssh/id_rsa.pub nama-pengguna@alamat-IP-peranti-asal -p 2222`

3. Konfigurasi ~/.ssh/config pada peranti baru:
```
Host peranti-asal
    HostName alamat-IP-peranti-asal
    Port 2222
    User nama-pengguna
```

## Pemindahan Fail Dengan Rsync

Senaraikan folder yang ingin dipindahkan, kemudian gunakan for loop dengan rsync:

`list="Documents Downloads Desktop Pictures Videos Music kucing"
cd /mnt/c/Users/nama-pengguna
for i in $list; do
    rsync -avzh -e ssh peranti-asal:/mnt/c/Users/nama-pengguna/$i .
done`

Pastikan anda tukar nama pengguna, IP, port, dan direktori ikut konfigurasi sendiri.

Dengan cara ini, anda tidak perlu duduk berjam-jam menunggu proses copy-paste. Biarkan sahaja ia berjalan di background.

## Tip Tambahan
Anda juga boleh menyalin folder tertentu dari AppData (C:\Users\nama_pengguna\AppData) untuk bawa data aplikasi. Contohnya, dengan menyalin folder AnyDesk, senarai peranti yang pernah diakses akan tersedia semula selepas pemasangan.

## Alternatif

Untuk pemindahan Windows ke Windows, sebenarnya boleh juga gunakan robocopy melalui PowerShell. Ia lebih laju untuk sekali jalan, terutamanya bila hanya mahu salin semua data dari peranti lama ke peranti baru.

Namun saya lebih selesa menggunakan rsync melalui WSL kerana:

* Arahan lebih fleksibel (boleh exclude/include folder).
* Ada compression semasa pemindahan rangkaian.
* Sesuai untuk sync berulang kali, bukan sekali sahaja.